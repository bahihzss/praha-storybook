# Storybook

## 課題３

### Storybook で開発するメリット
* コンポーネント単位での検証が可能になる
* コンポーネント同士が疎結合になる
* スナップショットテストなどの基盤にできる

### Storybook で開発するデメリット
* ストーリーの保守にコストがかかる
* Atomic Design などにこだわりすぎて必要以上に細かいコンポーネント分割を行ってしまうことがある
* アプリとは別の React で動いているので、バージョンの不整合とか起きやすい
* Vue で使うと React のモノを無理やり対応させている感がある（より保守コストがかかる）

### Storybook クイズ
* Storybook における CSF とは何を目的としたどんなモノでしょう？
* .storybook ディレクトリにある main.js, preview.js はそれぞれどういった設定を記述するファイルでしょう？
* Storybook における decorator とはどういうモノでしょう？


# スナップショットテスト

## 課題１

### スナップショットテストとは
* ReactやVue等のコンポーネントで生成するUIが、前回実行時と変わっていないかをチェックするテスト

### スナップショットで防止できる不具合
* ステート stock は在庫を文字列で格納していたが、数値型に修正した。すると、在庫切れ判定ロジックの stock === "0" が常に false になり在庫切れのストーリーで「在庫切れ」の文字列が表示されなくなった。
* jQuery ライブラリをラップしたようなコンポーネントでも変更を検知できる（やらないでいいなら、やらん方がいいけど）
* useRef を使って子コンポーネント内の DOM を操作している場合でも変更を検知できる（やらないでいいなら、やらん方がいいけど）

### スナップショットテストで防止できない不具合
* ボタンの color=primary の色を青から赤に変えた、本来青のままでいて欲しいボタンが赤色になった
* イベントハンドラーにバグが混入していて、ボタンをクリックしても動かなくなっていた
* 非同期にデータを読み込むコンポーネントの読み込み後の表示に不具合があった


# ビジュアルリグレッションテスト

## 課題２

* スナップショットテスト
  * メリット
    * 文言の変更などはVRTよりわかりやすい
  * デメリット
    * リネームなどのリファクタリングで差分が発生しまくる
* ビジュアルリグレッションテスト
  * メリット
    * スタイルの変更なども検出できる
  * デメリット
    * 変更に影響している要素がわかりづらい